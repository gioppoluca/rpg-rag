{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Add Source</h2>

{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<form method="post" action="/ui/campaigns/{{ campaign_id }}/sources/new">
    <div class="mb-3">
        <label class="form-label">Name</label>
        <input class="form-control" name="name" required placeholder="Obsidian Vault">
    </div>

    <div class="mb-3">
        <label class="form-label">Kind</label>
        <select class="form-select" name="kind">
            <option value="obsidian_md">obsidian_md</option>
            <option value="pdf">pdf</option>
            <option value="txt">txt</option>
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Root path (container-visible)</label>
        <input class="form-control" name="root_path" required placeholder="/data/vault">
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Include globs (one per line)</label>
            <textarea class="form-control" name="include_globs_raw" rows="4">**/*.md</textarea>
        </div>
        <div class="col-md-6 mb-3">
            <label class="form-label">Exclude globs (one per line)</label>
            <textarea class="form-control" name="exclude_globs_raw" rows="4">**/.obsidian/**
**/.git/**
**/node_modules/**</textarea>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4 mb-3">
            <label class="form-label">Change detection</label>
            <select class="form-select" name="change_detection">
                <option value="auto" selected>auto</option>
                <option value="mtime_size">mtime_size</option>
                <option value="sha256">sha256</option>
            </select>
        </div>
        <div class="col-md-4 mb-3 d-flex align-items-center">
            <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" name="recursive" checked>
                <label class="form-check-label">Recursive</label>
            </div>
        </div>
        <div class="col-md-4 mb-3 d-flex align-items-center">
            <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" name="enabled" checked>
                <label class="form-check-label">Enabled</label>
            </div>
        </div>
    </div>

    <div class="btn-group">
        <a class="btn btn-outline-secondary" href="/ui/campaigns/{{ campaign_id }}/kb">Cancel</a>
        <button class="btn btn-primary" type="submit">Save</button>
    </div>
</form>
{% endblock %}